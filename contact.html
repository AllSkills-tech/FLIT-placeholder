<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Link to css styling sheet -->
  <link rel="stylesheet" href="assets/css/style.css">

  <title>Contact FLIT.ie</title>
</head>
<body>
  <header>
    <div>
      <a href="index.html">
        <h1 class="logo">
          <span class="logo-f">F</span><span class="logo-lit">Lit</span><span class="logo-.ie">.ie</span>
        </h1>
      </a>
    </div>
    <nav class="desktop-nav">
      <ul>
        <li class="header-link">
          <a href="index.html">
            Home
          </a>
        </li>
        <li class="header-link">
          <a href="about.html">
            About
          </a>
        </li>
        <li class="header-link">
          <a href="blog.html">
            Blog
          </a>
        </li>
        <li class="header-link">
          <a href="contact.html" class="active-page" aria-current="page">
            Contact us
          </a>
        </li>
      </ul>
    </nav>
    <div class="burger">Mobile burger</div>
  </header>
  <div class="mobile-nav">Mobile nav</div>
  <main>
    <div class="title-plus-container">
      <h2>
        What do you think would help women in Ireland?
      </h2>
    </div>
    <div class="form-container">
      <form id="contact-form">
        <div class="form-title">
          <h3>Please share your thoughts here</h3>
        </div>
        <div class="name-section form-section">
          <div class="input-and-label">
            <label for="name">Name:</label>
            <input
              type="text"
              id="name"
              name="name"
              required>
          </div>
          <div class="input-and-label">
            <p>Check the category that best applies to you:</p>
            <div class="radio-category">
              <input type="radio" name="repondant-category" id="provider" value="provider" required />
              <label for="provider">Involved in <strong>providing</strong> financial literacy</label>
            </div>
            <div class="radio-category">
              <input type="radio" name="repondant-category" id="user" value="user" required />
              <label for="user">Looking to <strong>gain</strong> financial literacy</label>
            </div>
            <div class="radio-category">
              <input type="radio" name="repondant-category" id="other" value="other" required />
              <label for="other">Other</label>
            </div>
          </div>
        </div>

        <div class="ideas-section form-section">
          <div class="input-and-label">
            <label for="problems">What financial challenges do Irish women currently face?</label>
            <textarea
              id="problems"
              cols="38"
              rows="5"
              placeholder="Type to fill ...."
              name="problems"
            ></textarea>
          </div>
          <div class="input-and-label">
            <label for="features">What would like to see FLIT provide?</label>
            <textarea
              id="features"
              cols="38"
              rows="5"
              placeholder="Type to fill ...."
              name="features"
            ></textarea>
          </div>
        </div>

        <div class="email-section form-section">
          <div class="input-and-label">
            <label for="email">Email:</label>
            <input
              type="email"
              id="email"
              name="email"
              required>
          </div>
          <div class="input-and-label">
            <label for="contact-consent">Happy for us to contact you directly?</label>
            <input
              type="checkbox"
              id="contact-consent"
              name="contact-consent"
            >
          </div>
          <div class="input-and-label">
            <label for="mail-list-consent">Would like to recieve updates about FLIT?</label>
            <input
              type="checkbox"
              id="mail-list-consent"
              name="mail-list-consent"
            >
          </div>
        </div>

        <div class="submit-section form-section">
          <div class="response-container">
            <p id="submission-response"></p>
          </div>
          <input type="submit" value="Submit" class="submit-button" id="contact-submit-button">
        </div>
      </form>
    </div>

  </main>
  <footer>
    <p>Copyright info</p>
    <ul>
      <li class="footer-link">
        <a 
          href=""
          target="_blank" 
          rel="noopener" 
          aria-label="Visit (opens in a new tab)"
        >
          Link
        </a>
      </li>
      <li class="footer-link">
        <a 
          href=""
          target="_blank" 
          rel="noopener" 
          aria-label="Visit (opens in a new tab)"
        >
          Link
        </a>
      </li>
    </ul>
  </footer>

  <!-- Load the EmailJS SDK: -->
    <script
      type="text/javascript" 
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
 
    <!-- initialise the emailjs SDK -->
    <script type="text/javascript">
      (function() {
        console.log("Initialising emailjs SDK")
        // https://dashboard.emailjs.com/admin/account
        emailjs.init({
          //  publicKey: process.env.EMAILJS_PUBLIC_KEY,
          publicKey: 'nJIzMgsyYaZu0gOHX',
        });
        console.log('publicKey initialised');
      })();
    </script>
    <script type="text/javascript">
      // CONTACT FORM - content below from emailjs:
      window.onload = function() {
        console.log("Window loaded - function running")
        const btn = document.getElementById('contact-submit-button');
        console.log(btn);
        const response = document.getElementById('submission-response');
        console.log(response);
        document.getElementById('contact-form').addEventListener(
          'submit', 
          function(event) {
            console.log("Submit function triggered")
            event.preventDefault();
            if (btn.value === 'Submit'){
              response.innerHTML = 'Submitting form ...';
              //emailjs.sendForm(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, this)
              emailjs.sendForm('service_l3pogah', 'template_sz9ug5t', this)
              .then(() => {
                response.innerHTML = 'Thank you for sharing your thoughts with us, you should receive an acknowledgement email in the next few minutes...';
                btn.value = 'Clear form';
              }, (err) => {
                response.innerHTML = 'An error has occurred, please try submitting the form again.'
                console.log(JSON.stringify(err));
              });
            } else if (btn.value === 'Clear form'){
              console.log("Clear form called");
              document.getElementById('contact-form').reset();
              btn.value = 'Submit';
              response.innerHTML = '';
            }
          }
        );
      }
    </script>
</body>
</html>